{"name":"Ethercat-drivers","tagline":"This package contains EtherCAT drivers for IgH EtherCAT Master for Linux","body":"EtherCAT  drivers\r\n================\r\n\r\nThis package contains EtherCAT drivers to integrate with [IgH EtherCAT Master for Linux](http://etherlab.org/en/ethercat/).\r\n\r\nFor now this only contains **r8169** driver, for kernel **3.8.x** and **3.10.x**. They are used to control the Meka robot at Ensta ParisTech at 1Khz with [**rtai 4.0**](https://www.rtai.org/).\r\n\r\n## Installation\r\n\r\n#### Download EtherCAT 1.5.2\r\n```bash\r\nwget http://etherlab.org/download/ethercat/ethercat-1.5.2.tar.bz2\r\ntar xfvj ethercat-1.5.2.tar.bz2\r\n```\r\n\r\n#### Get the drivers\r\n```bash\r\ncd ethercat-1.5.2\r\nwget https://raw.githubusercontent.com/ahoarau/ethercat-drivers/master/r8169-3.8-3.10.patch\r\n## Apply patch\r\npatch -p1 < ethercat-drivers/r8169-3.8-3.10.patch\r\n```\r\n\r\n#### Build the EtherCAT master modules\r\nExample with kernel 3.10 and driver r8169 (Meka robot).\r\n```bash\r\n./configure --enable-cycles --enable-r8169  --with-rtai-dir=/usr/realtime/ --disable-8139too --with-r8169-kernel=3.10\r\nmake -j$[$(nproc)+1] all modules\r\nsudo make modules_install install\r\nsudo depmod\r\n```\r\n#### Configure your environnement\r\n\r\n```bash\r\nsudo -s\r\necho KERNEL==\\\"EtherCAT[0-9]*\\\", MODE=\\\"0664\\\" > /etc/udev/rules.d/99-EtherCAT.rules\r\ncp etc/init.d/ethercat /etc/init.d/ethercat # to start the master\r\ncp etc/sysconfig/ethercat /etc/sysconfig/ethercat # the config file\r\nexit\r\n```\r\nThen copy the mac address of the ethernet card you'd like to use (use ifconfig) to MASTER0_DEVICE and set the driver your card should use to DEVICE_MODULES ( example: DEVICE_MODULES=\"r8169\"):\r\n\r\n```bash\r\nsudo nano /etc/sysconfig/ethercat\r\n```\r\n#### Start EtherCAT master\r\nThen when you have configured your environnement (see the install note on ethercat-1.5.2), you can start the driver:\r\n```bash\r\nsudo service ethercat restart\r\n```\r\nSee output messages with dmesg:\r\n```bash\r\ndmesg\r\n```\r\n\r\n> Contact : Antoine Hoarau <hoarau.robotics@gmail.com>\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}